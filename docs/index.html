<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Simple wrapper functions for httr that make it easier to make manual HTTP calls to a BrAPI server">
<title>BrAPI • BrAPI</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="BrAPI">
<meta property="og:description" content="Simple wrapper functions for httr that make it easier to make manual HTTP calls to a BrAPI server">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">BrAPI</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="brapir">BrAPI.R<a class="anchor" aria-label="anchor" href="#brapir"></a>
</h1></div>
<p>This R package contains a simple R6 Class for interacting with a BrAPI server. It holds all of the information needed to connect to a server (such as the hostname) and has helper functions for making an HTTP requests to the BrAPI server.</p>
<p>It does not have any knowledge of the currently supported BrAPI endpoints. You’ll need to refer to the <a href="https://brapi.org/specification" class="external-link">BrAPI specification</a> to know which endpoints to use and how the response will be formatted.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get a BrAPI Connection</span></span>
<span><span class="va">wheat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/getBrAPIConnection.html">getBrAPIConnection</a></span><span class="op">(</span><span class="st">"T3/Wheat"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get Studies associated with the Cornell breeding program</span></span>
<span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">wheat</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"/studies"</span>, query<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>programName<span class="op">=</span><span class="st">"Cornell University"</span><span class="op">)</span>, pageSize<span class="op">=</span><span class="fl">1000</span><span class="op">)</span></span>
<span><span class="va">studies</span> <span class="op">&lt;-</span> <span class="va">resp</span><span class="op">$</span><span class="va">data</span></span>
<span> </span>
<span><span class="co"># Get all Germplasm stored in the database</span></span>
<span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">wheat</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"/germplasm"</span>, page<span class="op">=</span><span class="st">"all"</span>, pageSize<span class="op">=</span><span class="fl">5000</span><span class="op">)</span></span>
<span><span class="va">germplasm</span> <span class="op">&lt;-</span> <span class="va">resp</span><span class="op">$</span><span class="va">combined_data</span></span></code></pre></div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>This package can be installed directly from GitHub, using the <code>devtools</code> package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install devtools, if you haven't already</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Install the BrAPI package from GitHub</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"TriticeaeToolbox/BrAPI.R"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">BrAPI</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h2>
<p>Reference Documentation can be found here: <a href="https://triticeaetoolbox.github.io/BrAPI.R" class="external-link">https://triticeaetoolbox.github.io/BrAPI.R</a></p>
</div>
<div class="section level2">
<h2 id="creating-a-brapi-connection">Creating a BrAPI Connection<a class="anchor" aria-label="anchor" href="#creating-a-brapi-connection"></a>
</h2>
<p>The <a href="https://triticeaetoolbox.github.io/BrAPI.R/reference/BrAPIConnection.html" class="external-link">BrAPIConnection Class</a> contains information about the BrAPI server and has helper functions for making HTTP requests.</p>
<p>There are some known pre-configured BrAPI connections included with this package. To see the list of known BrAPI connections, use the <a href="https://triticeaetoolbox.github.io/BrAPI.R/reference/listBrAPIConnections.html" class="external-link">listBrAPIConnections() function</a>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/listBrAPIConnections.html">listBrAPIConnections</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># PRINTS:</span></span>
<span><span class="co"># Known BrAPI Connections:</span></span>
<span><span class="co">#  T3/Wheat = wheat.triticeaetoolbox.org [v2]</span></span>
<span><span class="co">#  T3/Wheat Sandbox = wheat-sandbox.triticeaetoolbox.org [v2]</span></span>
<span><span class="co">#  T3/Oat = oat.triticeaetoolbox.org [v2]</span></span>
<span><span class="co">#  T3/Oat Sandbox = oat-sandbox.triticeaetoolbox.org [v2]</span></span>
<span><span class="co">#  T3/Barley = barley.triticeaetoolbox.org [v2]</span></span>
<span><span class="co">#  T3/Barley Sandbox = barley-sandbox.triticeaetoolbox.org [v2]</span></span>
<span><span class="co">#  Cassavabase = cassavabase.org [v2]</span></span></code></pre></div>
<p>To use a known BrAPI connection, reference it by name in the <a href="https://triticeaetoolbox.github.io/BrAPI.R/reference/getBrAPIConnection.html" class="external-link">getBrAPIConnection() function</a>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wheat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/getBrAPIConnection.html">getBrAPIConnection</a></span><span class="op">(</span><span class="st">"T3/Wheat"</span><span class="op">)</span></span></code></pre></div>
<p>To manually create a BrAPI connection, you’ll need to specify the host of the BrAPI server (and optionally set the protocol, path, and/or version) in the <a href="https://triticeaetoolbox.github.io/BrAPI.R/reference/createBrAPIConnection.html" class="external-link">createBrAPIConnection() function</a>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">kelp</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/createBrAPIConnection.html">createBrAPIConnection</a></span><span class="op">(</span><span class="st">"sugarkelpbase.org"</span><span class="op">)</span></span>
<span><span class="va">kelpv1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/createBrAPIConnection.html">createBrAPIConnection</a></span><span class="op">(</span><span class="st">"sugarkelpbase.org"</span>, version<span class="op">=</span><span class="st">"v1"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="making-http-requests">Making HTTP Requests<a class="anchor" aria-label="anchor" href="#making-http-requests"></a>
</h2>
<p>Once you have a <code>BrAPIConnection</code> object, you can use it to make HTTP Requests to the BrAPI server. There is a separate helper function for each type of HTTP request.</p>
<ul>
<li>
<a href="https://triticeaetoolbox.github.io/BrAPI.R/reference/BrAPIConnection.html#method-BrAPIConnection-get" class="external-link">conn$get() function</a> - to make a GET request</li>
<li>
<a href="https://triticeaetoolbox.github.io/BrAPI.R/reference/BrAPIConnection.html#method-BrAPIConnection-post" class="external-link">conn$post() function</a> - make a POST request</li>
<li>
<a href="https://triticeaetoolbox.github.io/BrAPI.R/reference/BrAPIConnection.html#method-BrAPIConnection-put" class="external-link">conn$put() function</a> - make a PUT request</li>
</ul>
<div class="section level3">
<h3 id="request-parameters">Request Parameters<a class="anchor" aria-label="anchor" href="#request-parameters"></a>
</h3>
<p>Each of the request functions (<code>get</code>, <code>post</code>, <code>put</code>) can take the following parameters:</p>
<ul>
<li>
<code>call</code> - The BrAPI endpoint to make the request to</li>
<li>
<code>query</code> - (optional) A named list of query parameters</li>
<li>
<code>body</code> - (optional) A named list or vector of body parameters (this will be automatically converted to JSON)</li>
<li>
<code>page</code> - (optional) the index of the page of results to return (DEFAULT: 0)<ul><li>When <code>page="all"</code>, all of the available pages will be fetched sequentially and the response properties of all of the individual pages along with the combined data from all of the pages will be returned</li></ul>
</li>
<li>
<code>pageSize</code> - (optional) the maximum size of the page of results to return (DEFAULT: 10)</li>
</ul>
</div>
<div class="section level3">
<h3 id="response-format">Response Format<a class="anchor" aria-label="anchor" href="#response-format"></a>
</h3>
<p>The return value for each of the request functions (<code>get</code>, <code>post</code>, <code>put</code>) will return a named list containing the properties of the Response.</p>
<p>For a singe-page request:</p>
<ul>
<li>
<code>response</code> - the <code>httr</code> response object</li>
<li>
<code>status</code> - the parsed HTTP status</li>
<li>
<code>content</code> - the full content of the body of the response</li>
<li>
<code>metadata</code> - the metadata object from the body of the reponse, if returned</li>
<li>
<code>data</code> - the data object from the body of the response, if returned</li>
</ul>
<p>For a multi-page request (when <code>page="all"</code>):</p>
<ul>
<li>
<code>response</code> - a list of the <code>httr</code> response object by page</li>
<li>
<code>status</code> - a list of the parsed HTTP status by page</li>
<li>
<code>content</code> - a list of the full content of the body of the response by page</li>
<li>
<code>metadata</code> - a list of the metadata object from the body of the response by page, if returned</li>
<li>
<code>data</code> - a list of the data object from the body of the response by page, if returned</li>
<li>
<code>combined_data</code> - a combined vector of the data from all of the pages, if returned</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># GET Request</span></span>
<span><span class="va">wheat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/getBrAPIConnection.html">getBrAPIConnection</a></span><span class="op">(</span><span class="st">"T3/Wheat"</span><span class="op">)</span></span>
<span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">wheat</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"/studies"</span>, query<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>programName<span class="op">=</span><span class="st">"Cornell University"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># POST Request</span></span>
<span><span class="va">sandbox</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/BrAPIConnection.html">BrAPIConnection</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">"wheat-sandbox.triticeaetoolbox.org"</span><span class="op">)</span></span>
<span><span class="va">d1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>observationUnitDbId<span class="op">=</span><span class="st">"ou1"</span>, observationVariableDbId<span class="op">=</span><span class="st">"ov1"</span>, value<span class="op">=</span><span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">d2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>observationUnitDbId<span class="op">=</span><span class="st">"ou2"</span>, observationVariableDbId<span class="op">=</span><span class="st">"ov1"</span>, value<span class="op">=</span><span class="fl">40</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">d1</span>, <span class="va">d2</span><span class="op">)</span></span>
<span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">sandbox</span><span class="op">$</span><span class="fu">post</span><span class="op">(</span><span class="st">"/token"</span>, query<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>username<span class="op">=</span><span class="st">"testing"</span>, password<span class="op">=</span><span class="st">"testing123"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">sandbox</span><span class="op">$</span><span class="fu">post</span><span class="op">(</span><span class="st">"/observations"</span>, body<span class="op">=</span><span class="va">data</span>, token<span class="op">=</span><span class="va">resp</span><span class="op">$</span><span class="va">content</span><span class="op">$</span><span class="va">access_token</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># PUT Request</span></span>
<span><span class="va">sandbox</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/BrAPIConnection.html">BrAPIConnection</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">"wheat-sandbox.triticeaetoolbox.org"</span><span class="op">)</span></span>
<span><span class="va">d1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>observationDbId <span class="op">=</span> <span class="st">"ob1"</span>, observationUnitDbId<span class="op">=</span><span class="st">"ou1"</span>, observationVariableDbId<span class="op">=</span><span class="st">"ov1"</span>, value<span class="op">=</span><span class="fl">60</span><span class="op">)</span></span>
<span><span class="va">d2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>observationDbId <span class="op">=</span> <span class="st">"ob2"</span>, observationUnitDbId<span class="op">=</span><span class="st">"ou2"</span>, observationVariableDbId<span class="op">=</span><span class="st">"ov1"</span>, value<span class="op">=</span><span class="fl">70</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">d1</span>, <span class="va">d2</span><span class="op">)</span></span>
<span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">sandbox</span><span class="op">$</span><span class="fu">post</span><span class="op">(</span><span class="st">"/token"</span>, query<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>username<span class="op">=</span><span class="st">"testing"</span>, password<span class="op">=</span><span class="st">"testing123"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">sandbox</span><span class="op">$</span><span class="fu">put</span><span class="op">(</span><span class="st">"/observations"</span>, body<span class="op">=</span><span class="va">data</span>, token<span class="op">=</span><span class="va">resp</span><span class="op">$</span><span class="va">content</span><span class="op">$</span><span class="va">access_token</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="tutorial">Tutorial<a class="anchor" aria-label="anchor" href="#tutorial"></a>
</h2>
<p>A more in-depth tutorial using data from T3/Wheat can be found in the TUTORIAL.md file.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing BrAPI</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>David Waring <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9971-9776" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by David Waring.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
