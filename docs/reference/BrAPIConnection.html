<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>BrAPI Connection Class — BrAPIConnection • BrAPI</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="BrAPI Connection Class — BrAPIConnection"><meta name="description" content="BrAPI Connection Class
BrAPI Connection Class"><meta property="og:description" content="BrAPI Connection Class
BrAPI Connection Class"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BrAPI</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>BrAPI Connection Class</h1>

      <div class="d-none name"><code>BrAPIConnection.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>BrAPI Connection Class</p>
<p>BrAPI Connection Class</p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>An R6 Class representing a connection to a BrAPI server.</p>
<p>This Class provides all of the information needed for connecting to a BrAPI server.
The host field is required.  For all other fields, the default value will be used if one is not provided.
Add the <code>is_breedbase=TRUE</code> argument to enable breedbase-specific functions.</p>
<p>This Class also provides helper functions for making requests to the BrAPI server.  Use <code>conn$get()</code> to make
a GET request, <code>conn$post()</code> to make a POST request, and <code>conn$put()</code> to make a PUT request.</p>
<p>The return value of a request function contains a named list with the properties of the Response(s).</p>
<p>For a singe-page request:</p><ul><li><p><code>response</code> = the <code>httr</code> response object</p></li>
<li><p><code>status</code> = the parsed HTTP status</p></li>
<li><p><code>content</code> = the full content of the body of the response</p></li>
<li><p><code>metadata</code> = the metadata object from the body of the reponse, if returned</p></li>
<li><p><code>data</code> = the data object from the body of the response, if returned</p></li>
</ul><p>For a multi-page request (when <code>page="all"</code>):</p><ul><li><p><code>response</code> = a list of the <code>httr</code> response object by page</p></li>
<li><p><code>status</code> = a list of the parsed HTTP status by page</p></li>
<li><p><code>content</code> = a list of the full content of the body of the response by page</p></li>
<li><p><code>metadata</code> = a list of the metadata object from the body of the response by page, if returned</p></li>
<li><p><code>data</code> = a list of the data object from the body of the response by page, if returned</p></li>
<li><p><code>combined_data</code> = a combined vector of the data from all of the pages, if returned</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>protocol</code></dt>
<dd><p>The HTTP protocol - either 'http' or 'https' (Default: <code>https</code>)</p></dd>


<dt><code>host</code></dt>
<dd><p>The hostname of the BrAPI server</p></dd>


<dt><code>path</code></dt>
<dd><p>The base bath of the BrAPI endpoints (not including the version) (Default: <code>/brapi/</code>)</p></dd>


<dt><code>version</code></dt>
<dd><p>The BrAPI version (such as 'v1' or 'v2') (Default: <code>v2</code>)</p></dd>


<dt><code>is_breedbase</code></dt>
<dd><p>A flag to indicate this BrAPI connection is to a breedbase instance.  This
adds additional support for breedbase-specific functionality. (Default: <code>FALSE</code>)</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-BrAPIConnection-new"><code>BrAPIConnection$new()</code></a></p></li>
<li><p><a href="#method-BrAPIConnection-get"><code>BrAPIConnection$get()</code></a></p></li>
<li><p><a href="#method-BrAPIConnection-post"><code>BrAPIConnection$post()</code></a></p></li>
<li><p><a href="#method-BrAPIConnection-put"><code>BrAPIConnection$put()</code></a></p></li>
<li><p><a href="#method-BrAPIConnection-wizard"><code>BrAPIConnection$wizard()</code></a></p></li>
<li><p><a href="#method-BrAPIConnection-vcf"><code>BrAPIConnection$vcf()</code></a></p></li>
<li><p><a href="#method-BrAPIConnection-vcf_archived"><code>BrAPIConnection$vcf_archived()</code></a></p></li>
<li><p><a href="#method-BrAPIConnection-clone"><code>BrAPIConnection$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-BrAPIConnection-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a new <code>BrAPIConnection</code> object</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/BrAPIConnection.html">BrAPIConnection</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  <span class="va">host</span>,</span>
<span>  protocol <span class="op">=</span> <span class="st">"https"</span>,</span>
<span>  path <span class="op">=</span> <span class="st">"/brapi/"</span>,</span>
<span>  version <span class="op">=</span> <span class="st">"v2"</span>,</span>
<span>  is_breedbase <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>host</code></dt>
<dd><p>(required) The hostname of the BrAPI server</p></dd>


<dt><code>protocol</code></dt>
<dd><p>(optional) The HTTP protocol - either 'http' or 'https'</p></dd>


<dt><code>path</code></dt>
<dd><p>(optional) The base path of the BrAPI endpoints</p></dd>


<dt><code>version</code></dt>
<dd><p>(optional) The BrAPI version</p></dd>


<dt><code>is_breedbase</code></dt>
<dd><p>(optional) set to TRUE if the connection is to a breedbase instance</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p><code>BrAPIConnection</code> object</p>
</div>

</div><p></p><hr><a id="method-BrAPIConnection-get"></a><div class="section">
<h3 id="method-get-">Method <code><a href="https://rdrr.io/r/base/get.html" class="external-link">get()</a></code><a class="anchor" aria-label="anchor" href="#method-get-"></a></h3>
<p>Make a GET request</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">BrAPIConnection</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="va">call</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>call</code></dt>
<dd><p>The BrAPI endpoint to request</p></dd>


<dt><code>...</code></dt>
<dd><p>(optional) Additional arguments passed to <code>httr</code></p></dd>


<dt><code>query</code></dt>
<dd><p>(optional) A named list of query parameters</p></dd>


<dt><code>page</code></dt>
<dd><p>(optional) The index of the page of results (use 'all' to get all pages) (Default: 0)</p></dd>


<dt><code>pageSize</code></dt>
<dd><p>(optional) The max size of the result pages (Default: 10)</p></dd>


<dt><code>token</code></dt>
<dd><p>(optional) An Authorization token to add to the request</p></dd>


<dt><code>verbose</code></dt>
<dd><p>(optional) Set to true to include additional output to the console about the Response</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>A named list of Response properties</p>
</div>
<div class="section">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="co"># Making a GET request</span></span>
<span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">wheat</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"/germplasm"</span>, pageSize<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span>
<span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">wheat</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"/studies"</span>, pageSize<span class="op">=</span><span class="fl">1000</span>, page<span class="op">=</span><span class="st">"all"</span><span class="op">)</span></span>
<span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">wheat</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"/studies"</span>, query<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>programName<span class="op">=</span><span class="st">"Cornell University"</span><span class="op">)</span>, pageSize<span class="op">=</span><span class="fl">1000</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-BrAPIConnection-post"></a><div class="section">
<h3 id="method-post-">Method <code>post()</code><a class="anchor" aria-label="anchor" href="#method-post-"></a></h3>
<p>Make a POST request</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">BrAPIConnection</span><span class="op">$</span><span class="fu">post</span><span class="op">(</span><span class="va">call</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>call</code></dt>
<dd><p>The BrAPI endpoint to request</p></dd>


<dt><code>...</code></dt>
<dd><p>(optional) Additional arguments passed to <code>httr</code></p></dd>


<dt><code>query</code></dt>
<dd><p>(optional) A named list of query parameters</p></dd>


<dt><code>body</code></dt>
<dd><p>(optional) A named list or vector of the request body (will be converted to JSON)</p></dd>


<dt><code>page</code></dt>
<dd><p>(optional) The index of the page of results (use 'all' to get all pages) (Default: 0)</p></dd>


<dt><code>pageSize</code></dt>
<dd><p>(optional) The max size of the result pages (Default: 10)</p></dd>


<dt><code>token</code></dt>
<dd><p>(optional) An Authorization token to add to the request</p></dd>


<dt><code>verbose</code></dt>
<dd><p>(optional) Set to true to include additional output to the console about the Response</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>A named list of Response properties</p>
</div>
<div class="section">
<h4 id="examples-1">Examples<a class="anchor" aria-label="anchor" href="#examples-1"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code># Make a POST request
\dontrun{
sandbox &lt;- BrAPIConnection$new("wheat-sandbox.triticeaetoolbox.org")
d1 &lt;- list(observationUnitDbId="ou1", observationVariableDbId="ov1", value=50)
d2 &lt;- list(observationUnitDbId="ou2", observationVariableDbId="ov1", value=40)
data &lt;- list(d1, d2)
resp &lt;- sandbox$post("/token", query=list(username="testing", password="testing123"))
resp &lt;- sandbox$post("/observations", body=data, token=resp$content$access_token)
}

</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-BrAPIConnection-put"></a><div class="section">
<h3 id="method-put-">Method <code>put()</code><a class="anchor" aria-label="anchor" href="#method-put-"></a></h3>
<p>Make a PUT request</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">BrAPIConnection</span><span class="op">$</span><span class="fu">put</span><span class="op">(</span><span class="va">call</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>call</code></dt>
<dd><p>The BrAPI endpoint to request</p></dd>


<dt><code>...</code></dt>
<dd><p>(optional) Additional arguments passed to <code>httr</code></p></dd>


<dt><code>query</code></dt>
<dd><p>(optional) A named list of query parameters</p></dd>


<dt><code>body</code></dt>
<dd><p>(optional) A named list or vector of the request body (will be converted to JSON)</p></dd>


<dt><code>page</code></dt>
<dd><p>(optional) The index of the page of results (use 'all' to get all pages) (Default: 0)</p></dd>


<dt><code>pageSize</code></dt>
<dd><p>(optional) The max size of the result pages (Default: 10)</p></dd>


<dt><code>token</code></dt>
<dd><p>(optional) An Authorization token to add to the request</p></dd>


<dt><code>verbose</code></dt>
<dd><p>(optional) Set to true to include additional output to the console about the Response</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-3">Returns<a class="anchor" aria-label="anchor" href="#returns-3"></a></h4>
<p>A named list of Response properties</p>
</div>

</div><p></p><hr><a id="method-BrAPIConnection-wizard"></a><div class="section">
<h3 id="method-wizard-">Method <code>wizard()</code><a class="anchor" aria-label="anchor" href="#method-wizard-"></a></h3>
<p>Make a Breedbase Search Wizard request.</p>
<p>This function returns all of the items of the specified data type, filtered by the data types
and items included in the filters argument.  For example, you can use this to find all field
trials from a set of breeding programs in a specific year.  If you don't provide any filters,
the function will return the full set of all items in the database for the data type.  The results
only include the database IDs and names of the matching items.  You can use the IDs in the general
BrAPI endpoints to get additional data about the items.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">BrAPIConnection</span><span class="op">$</span><span class="fu">wizard</span><span class="op">(</span><span class="va">data_type</span>, filters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>data_type</code></dt>
<dd><p>The data type to return after filtering</p></dd>


<dt><code>filters</code></dt>
<dd><p>A list of the filters (up to 3) to apply to the search.  The key should be the
name of the data type and the value should be a vector of database ids or names of the items
to include in the filter.</p>
<p>It is better to use IDs if you have them - when you use names, the function will make additional
queries to lookup the IDs for the names you provide.</p>
<p>Supported data types include: accessions, organisms, breeding_programs, genotyping_protocols, genotyping_projects, locations, plants, plots, tissue_sample, seedlots, trait_components, traits, trials, trial_designs, trial_types, years</p></dd>


<dt><code>verbose</code></dt>
<dd><p>Set to TRUE to include logging information</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-4">Returns<a class="anchor" aria-label="anchor" href="#returns-4"></a></h4>
<p>A response with the matching data.
The $content key contains the raw breedbase response.
The $data key contains parsed data: a list parsed into <code>ids</code>, <code>names</code> and <code>map</code> (a named list of item names -&gt; ids)</p>
</div>
<div class="section">
<h4 id="examples-2">Examples<a class="anchor" aria-label="anchor" href="#examples-2"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="va">wheat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createBrAPIConnection.html">createBrAPIConnection</a></span><span class="op">(</span><span class="st">"wheat.triticeaetoolbox.org"</span>, is_breedbase <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># find matching trials, filtered by two breeding programs (identified by ids) and one year</span></span>
<span><span class="va">trials</span> <span class="op">&lt;-</span> <span class="va">wheat</span><span class="op">$</span><span class="fu">wizard</span><span class="op">(</span><span class="st">"trials"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>breeding_programs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">327</span>,<span class="fl">367</span><span class="op">)</span>, years <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2023</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># find matching accessions, filtered by field trials (identified by name)</span></span>
<span><span class="va">accessions</span> <span class="op">&lt;-</span> <span class="va">wheat</span><span class="op">$</span><span class="fu">wizard</span><span class="op">(</span><span class="st">"accessions"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>trials <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CornellMaster_2024_Helfer"</span>, <span class="st">"CornellMaster_2025_McGowan"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># find genotyping protocols that have data for the above set of accessions</span></span>
<span><span class="va">geno_protocols</span> <span class="op">&lt;-</span> <span class="va">wheat</span><span class="op">$</span><span class="fu">wizard</span><span class="op">(</span><span class="st">"genotyping_protocols"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>accessions <span class="op">=</span> <span class="va">accessions</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">ids</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-BrAPIConnection-vcf"></a><div class="section">
<h3 id="method-vcf-">Method <code>vcf()</code><a class="anchor" aria-label="anchor" href="#method-vcf-"></a></h3>
<p>Download a Breedbase VCF File</p>
<p>NOTE: Depending on the number of markers and accessions, this download may take a
very long time to complete.  You may want to use the conn$vcf_archived() function
to download a static archived VCF file of a genotyping project, if one is available.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">BrAPIConnection</span><span class="op">$</span><span class="fu">vcf</span><span class="op">(</span></span>
<span>  <span class="va">output</span>,</span>
<span>  <span class="va">genotyping_protocol_id</span>,</span>
<span>  accessions <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>output</code></dt>
<dd><p>The path to the output VCF file</p></dd>


<dt><code>genotyping_protocol_id</code></dt>
<dd><p>The Database ID of the genotyping protocol to download</p></dd>


<dt><code>accessions</code></dt>
<dd><p>(optional) A list of Accession Database IDs to use as a filter for the VCF data</p></dd>


<dt><code>verbose</code></dt>
<dd><p>Set to TRUE to include logging information</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-5">Returns<a class="anchor" aria-label="anchor" href="#returns-5"></a></h4>
<p>Status information about the request.  If successful, the genotype data will
be downloaded to the VCF file specified by the output argument.</p>
</div>
<div class="section">
<h4 id="examples-3">Examples<a class="anchor" aria-label="anchor" href="#examples-3"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
wheat &lt;- getBrAPIConnection("T3/WheatCAP")
wheat$vcf("~/Desktop/my_data.vcf", genotyping_protocol_id = 249)
wheat$vcf("~/Desktop/my_data.vcf", genotyping_protocol_id = 249, accessions = c(228677, 1666408))
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-BrAPIConnection-vcf_archived"></a><div class="section">
<h3 id="method-vcf-archived-">Method <code>vcf_archived()</code><a class="anchor" aria-label="anchor" href="#method-vcf-archived-"></a></h3>
<p>Download an Archived Breedbase VCF File</p>
<p>This function will list all of the available archived VCF files available for the specified protocol
and/or project.  You can select one to download and save to the provided output file.</p>
<p>The archived files are saved at the project-level.  So, if you specify a protocol, you'll get a list
of all of the available files for each project in that protocol.  If you're performing analysis at
the protocol-level, you'll need to manually merge the VCF files from each project in that protocol.</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">BrAPIConnection</span><span class="op">$</span><span class="fu">vcf_archived</span><span class="op">(</span></span>
<span>  <span class="va">output</span>,</span>
<span>  genotyping_protocol_id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  genotyping_project_id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>output</code></dt>
<dd><p>The path to the output VCF file</p></dd>


<dt><code>genotyping_protocol_id</code></dt>
<dd><p>The Database ID of the genotyping protocol</p></dd>


<dt><code>genotyping_project_id</code></dt>
<dd><p>The Database ID of the genotyping project</p></dd>


<dt><code>verbose</code></dt>
<dd><p>Set to TRUE to include logging information</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-6">Returns<a class="anchor" aria-label="anchor" href="#returns-6"></a></h4>
<p>Status information about the request. If the download of an available archived VCF file is
successful, the genotype data will be downloaded to the VCF file specified by the output argument.</p>
</div>
<div class="section">
<h4 id="examples-4">Examples<a class="anchor" aria-label="anchor" href="#examples-4"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
wheat &lt;- getBrAPIConnection("T3/WheatCAP")
wheat$vcf_archived("~/Desktop/my_data.vcf", genotyping_protocol_id=233)
wheat$vcf_archived("~/Desktop/my_data.vcf", genotyping_project_id=10371)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-BrAPIConnection-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">BrAPIConnection</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Directly Creating a new BrAPIConnection Object</span></span></span>
<span class="r-in"><span><span class="va">wheat</span> <span class="op">&lt;-</span> <span class="va">BrAPIConnection</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">"wheat.triticeaetoolbox.org"</span>, is_breedbase<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wheatv1</span> <span class="op">&lt;-</span> <span class="va">BrAPIConnection</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">"wheat.triticeaetoolbox.org"</span>, version<span class="op">=</span><span class="st">"v1"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using the createBrAPIConnection function</span></span></span>
<span class="r-in"><span><span class="va">barley</span> <span class="op">&lt;-</span> <span class="fu"><a href="createBrAPIConnection.html">createBrAPIConnection</a></span><span class="op">(</span><span class="st">"barley.triticeaetoolbox.org"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">barleyv1</span> <span class="op">&lt;-</span> <span class="fu"><a href="createBrAPIConnection.html">createBrAPIConnection</a></span><span class="op">(</span><span class="st">"barley.triticeaetoolbox.org"</span>, version<span class="op">=</span><span class="st">"v1"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `BrAPIConnection$get`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Making a GET request</span></span></span>
<span class="r-in"><span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">wheat</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"/germplasm"</span>, pageSize<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">wheat</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"/studies"</span>, pageSize<span class="op">=</span><span class="fl">1000</span>, page<span class="op">=</span><span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">wheat</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"/studies"</span>, query<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>programName<span class="op">=</span><span class="st">"Cornell University"</span><span class="op">)</span>, pageSize<span class="op">=</span><span class="fl">1000</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `BrAPIConnection$post`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Make a POST request</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">sandbox</span> <span class="op">&lt;-</span> <span class="va">BrAPIConnection</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">"wheat-sandbox.triticeaetoolbox.org"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>observationUnitDbId<span class="op">=</span><span class="st">"ou1"</span>, observationVariableDbId<span class="op">=</span><span class="st">"ov1"</span>, value<span class="op">=</span><span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>observationUnitDbId<span class="op">=</span><span class="st">"ou2"</span>, observationVariableDbId<span class="op">=</span><span class="st">"ov1"</span>, value<span class="op">=</span><span class="fl">40</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">d1</span>, <span class="va">d2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">sandbox</span><span class="op">$</span><span class="fu">post</span><span class="op">(</span><span class="st">"/token"</span>, query<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>username<span class="op">=</span><span class="st">"testing"</span>, password<span class="op">=</span><span class="st">"testing123"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">sandbox</span><span class="op">$</span><span class="fu">post</span><span class="op">(</span><span class="st">"/observations"</span>, body<span class="op">=</span><span class="va">data</span>, token<span class="op">=</span><span class="va">resp</span><span class="op">$</span><span class="va">content</span><span class="op">$</span><span class="va">access_token</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `BrAPIConnection$wizard`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">wheat</span> <span class="op">&lt;-</span> <span class="fu"><a href="createBrAPIConnection.html">createBrAPIConnection</a></span><span class="op">(</span><span class="st">"wheat.triticeaetoolbox.org"</span>, is_breedbase <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># find matching trials, filtered by two breeding programs (identified by ids) and one year</span></span></span>
<span class="r-in"><span><span class="va">trials</span> <span class="op">&lt;-</span> <span class="va">wheat</span><span class="op">$</span><span class="fu">wizard</span><span class="op">(</span><span class="st">"trials"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>breeding_programs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">327</span>,<span class="fl">367</span><span class="op">)</span>, years <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2023</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># find matching accessions, filtered by field trials (identified by name)</span></span></span>
<span class="r-in"><span><span class="va">accessions</span> <span class="op">&lt;-</span> <span class="va">wheat</span><span class="op">$</span><span class="fu">wizard</span><span class="op">(</span><span class="st">"accessions"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>trials <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CornellMaster_2024_Helfer"</span>, <span class="st">"CornellMaster_2025_McGowan"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>There is no matching item of type trials with the name CornellMaster_2024_Helfer</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>There is no matching item of type trials with the name CornellMaster_2025_McGowan</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># find genotyping protocols that have data for the above set of accessions</span></span></span>
<span class="r-in"><span><span class="va">geno_protocols</span> <span class="op">&lt;-</span> <span class="va">wheat</span><span class="op">$</span><span class="fu">wizard</span><span class="op">(</span><span class="st">"genotyping_protocols"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>accessions <span class="op">=</span> <span class="va">accessions</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">ids</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `BrAPIConnection$vcf`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">wheat</span> <span class="op">&lt;-</span> <span class="fu"><a href="getBrAPIConnection.html">getBrAPIConnection</a></span><span class="op">(</span><span class="st">"T3/WheatCAP"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wheat</span><span class="op">$</span><span class="fu">vcf</span><span class="op">(</span><span class="st">"~/Desktop/my_data.vcf"</span>, genotyping_protocol_id <span class="op">=</span> <span class="fl">249</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wheat</span><span class="op">$</span><span class="fu">vcf</span><span class="op">(</span><span class="st">"~/Desktop/my_data.vcf"</span>, genotyping_protocol_id <span class="op">=</span> <span class="fl">249</span>, accessions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">228677</span>, <span class="fl">1666408</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `BrAPIConnection$vcf_archived`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">wheat</span> <span class="op">&lt;-</span> <span class="fu"><a href="getBrAPIConnection.html">getBrAPIConnection</a></span><span class="op">(</span><span class="st">"T3/WheatCAP"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wheat</span><span class="op">$</span><span class="fu">vcf_archived</span><span class="op">(</span><span class="st">"~/Desktop/my_data.vcf"</span>, genotyping_protocol_id<span class="op">=</span><span class="fl">233</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wheat</span><span class="op">$</span><span class="fu">vcf_archived</span><span class="op">(</span><span class="st">"~/Desktop/my_data.vcf"</span>, genotyping_project_id<span class="op">=</span><span class="fl">10371</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Waring.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

